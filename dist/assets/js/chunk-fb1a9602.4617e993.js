(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb1a9602"],{"26a9":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?i("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[i("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","attraction_name")||e.$check_field("add","attraction_name")||e.$check_field("set","attraction_name")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"景点名称",prop:"attraction_name"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","attraction_name")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","attraction_name")?i("el-input",{attrs:{id:"attraction_name",placeholder:"请输入景点名称",disabled:e.disabledObj["attraction_name_isDisabled"]},model:{value:e.form["attraction_name"],callback:function(t){e.$set(e.form,"attraction_name",t)},expression:"form['attraction_name']"}}):e.$check_field("get","attraction_name")?i("div",[e._v(e._s(e.form["attraction_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","attraction_cities")||e.$check_field("add","attraction_cities")||e.$check_field("set","attraction_cities")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"景点城市",prop:"attraction_cities"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","attraction_cities")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","attraction_cities")?i("el-input",{attrs:{id:"attraction_cities",placeholder:"请输入景点城市",disabled:e.disabledObj["attraction_cities_isDisabled"]},model:{value:e.form["attraction_cities"],callback:function(t){e.$set(e.form,"attraction_cities",t)},expression:"form['attraction_cities']"}}):e.$check_field("get","attraction_cities")?i("div",[e._v(e._s(e.form["attraction_cities"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","attraction_address")||e.$check_field("add","attraction_address")||e.$check_field("set","attraction_address")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"景点地址",prop:"attraction_address"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","attraction_address")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","attraction_address")?i("el-input",{attrs:{id:"attraction_address",placeholder:"请输入景点地址",disabled:e.disabledObj["attraction_address_isDisabled"]},model:{value:e.form["attraction_address"],callback:function(t){e.$set(e.form,"attraction_address",t)},expression:"form['attraction_address']"}}):e.$check_field("get","attraction_address")?i("div",[e._v(e._s(e.form["attraction_address"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","admission_price")||e.$check_field("add","admission_price")||e.$check_field("set","admission_price")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"门票价格",prop:"admission_price"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","admission_price")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","admission_price")?i("el-input-number",{attrs:{id:"admission_price",disabled:e.disabledObj["admission_price_isDisabled"]},model:{value:e.form["admission_price"],callback:function(t){e.$set(e.form,"admission_price",e._n(t))},expression:"form['admission_price']"}}):e.$check_field("get","admission_price")?i("div",[e._v(e._s(e.form["admission_price"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","opening_hours")||e.$check_field("add","opening_hours")||e.$check_field("set","opening_hours")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"开放时间",prop:"opening_hours"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","opening_hours")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","opening_hours")?i("el-input",{attrs:{id:"opening_hours",placeholder:"请输入开放时间",disabled:e.disabledObj["opening_hours_isDisabled"]},model:{value:e.form["opening_hours"],callback:function(t){e.$set(e.form,"opening_hours",t)},expression:"form['opening_hours']"}}):e.$check_field("get","opening_hours")?i("div",[e._v(e._s(e.form["opening_hours"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_points")||e.$check_field("add","appointment_points")||e.$check_field("set","appointment_points")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"预约积分",prop:"appointment_points"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","appointment_points")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","appointment_points")?i("el-input-number",{attrs:{id:"appointment_points",disabled:e.disabledObj["appointment_points_isDisabled"]},model:{value:e.form["appointment_points"],callback:function(t){e.$set(e.form,"appointment_points",e._n(t))},expression:"form['appointment_points']"}}):e.$check_field("get","appointment_points")?i("div",[e._v(e._s(e.form["appointment_points"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","regular_users")||e.$check_field("add","regular_users")||e.$check_field("set","regular_users")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"普通用户",prop:"regular_users"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","regular_users")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","regular_users")?i("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(t){e.$set(e.form,"regular_users",t)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return i("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","regular_users")?i("el-select",{attrs:{id:"regular_users",disabled:!0},model:{value:e.form["regular_users"],callback:function(t){e.$set(e.form,"regular_users",t)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return i("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","user_name")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","user_name")?i("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(t){e.$set(e.form,"user_name",t)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?i("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","number_of_reservations")||e.$check_field("add","number_of_reservations")||e.$check_field("set","number_of_reservations")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"预约人数",prop:"number_of_reservations"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","number_of_reservations")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","number_of_reservations")?i("el-input-number",{attrs:{id:"number_of_reservations",disabled:e.disabledObj["number_of_reservations_isDisabled"]},model:{value:e.form["number_of_reservations"],callback:function(t){e.$set(e.form,"number_of_reservations",e._n(t))},expression:"form['number_of_reservations']"}}):e.$check_field("get","number_of_reservations")?i("div",[e._v(e._s(e.form["number_of_reservations"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_time")||e.$check_field("add","appointment_time")||e.$check_field("set","appointment_time")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"预约时间",prop:"appointment_time"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","appointment_time")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","appointment_time")?i("el-date-picker",{attrs:{disabled:e.disabledObj["appointment_time_isDisabled"],id:"appointment_time",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form["appointment_time"],callback:function(t){e.$set(e.form,"appointment_time",t)},expression:"form['appointment_time']"}}):e.$check_field("get","appointment_time")?i("div",[e._v(e._s(e.form["appointment_time"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_amount")||e.$check_field("add","appointment_amount")||e.$check_field("set","appointment_amount")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"预约金额",prop:"appointment_amount"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","appointment_amount")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","appointment_amount")?i("el-input",{attrs:{id:"appointment_amount",placeholder:"请输入预约金额",disabled:e.disabledObj["appointment_amount_isDisabled"]},model:{value:e.form["appointment_amount"],callback:function(t){e.$set(e.form,"appointment_amount",t)},expression:"form['appointment_amount']"}}):e.$check_field("get","appointment_amount")?i("div",[e._v(e._s(e.form["appointment_amount"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","obtainable_points")||e.$check_field("add","obtainable_points")||e.$check_field("set","obtainable_points")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"可得积分",prop:"obtainable_points"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","obtainable_points")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","obtainable_points")?i("el-input",{attrs:{id:"obtainable_points",placeholder:"请输入可得积分",disabled:e.disabledObj["obtainable_points_isDisabled"]},model:{value:e.form["obtainable_points"],callback:function(t){e.$set(e.form,"obtainable_points",t)},expression:"form['obtainable_points']"}}):e.$check_field("get","obtainable_points")?i("div",[e._v(e._s(e.form["obtainable_points"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","application_time")||e.$check_field("add","application_time")||e.$check_field("set","application_time")?i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"申请时间",prop:"application_time"}},["管理员"===e.user_group||e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("set","application_time")||!e.form["tourist_attraction_ticket_refund_id"]&&e.$check_field("add","application_time")?i("el-date-picker",{attrs:{disabled:e.disabledObj["application_time_isDisabled"],id:"application_time",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form["application_time"],callback:function(t){e.$set(e.form,"application_time",t)},expression:"form['application_time']"}}):e.$check_field("get","application_time")?i("div",[e._v(e._s(e.form["application_time"]))]):e._e()],1)],1):e._e(),i("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[i("el-form-item",{attrs:{label:"审核状态",prop:"examine_state"}},["管理员"===e.user_group||e.form["examine_state"]&&e.$check_examine()||!e.form["examine_state"]&&e.$check_examine()?i("el-select",{attrs:{id:"examine_state"},model:{value:e.form["examine_state"],callback:function(t){e.$set(e.form,"examine_state",t)},expression:"form['examine_state']"}},[i("el-option",{key:"未审核",attrs:{label:"未审核",value:"未审核"}}),i("el-option",{key:"已通过",attrs:{label:"已通过",value:"已通过"}}),i("el-option",{key:"未通过",attrs:{label:"未通过",value:"未通过"}})],1):i("div",[e._v(e._s(e.form["examine_state"]))])],1)],1)],1),i("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/tourist_attraction_ticket_refund/view","set")||e.$check_action("/tourist_attraction_ticket_refund/view","add")||e.$check_option("/tourist_attraction_ticket_refund/table","examine")?i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),i("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1):i("el-form-item",[i("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},r=[],s=(i("b64b"),i("159b"),i("96cf"),i("1da1")),o=i("c6e7"),_={mixins:[o["a"]],data:function(){return{field:"tourist_attraction_ticket_refund_id",url_add:"~/api/tourist_attraction_ticket_refund/add?",url_set:"~/api/tourist_attraction_ticket_refund/set?",url_get_obj:"~/api/tourist_attraction_ticket_refund/get_obj?",url_upload:"~/api/tourist_attraction_ticket_refund/upload?",query:{tourist_attraction_ticket_refund_id:0},form:{attraction_name:"",attraction_cities:"",attraction_address:"",admission_price:0,opening_hours:"",appointment_points:0,regular_users:0,user_name:"",number_of_reservations:0,appointment_time:"",appointment_amount:"",obtainable_points:"",application_time:"",examine_state:"未审核",tourist_attraction_ticket_refund_id:0},disabledObj:{attraction_name_isDisabled:!1,attraction_cities_isDisabled:!1,attraction_address_isDisabled:!1,admission_price_isDisabled:!1,opening_hours_isDisabled:!1,appointment_points_isDisabled:!1,regular_users_isDisabled:!1,user_name_isDisabled:!1,number_of_reservations_isDisabled:!1,appointment_time_isDisabled:!1,appointment_amount_isDisabled:!1,obtainable_points_isDisabled:!1,application_time_isDisabled:!1},list_user_regular_users:[]}},methods:{get_list_user_regular_users:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:i=t.sent,i.result&&i.result.list?e.list_user_regular_users=i.result.list:i.error&&console.error(i.error);case 4:case"end":return t.stop()}}),t)})))()},get_user_regular_users:function(e){var t=this.list_user_regular_users.getObj({user_id:e}),i="";return t&&(i=t.nickname?t.nickname:t.username),i},get_obj_before:function(e){var t=this,i="";return i=$.db.get("form"),$.push(this.form,i),this.form&&i&&Object.keys(this.form).forEach((function(e){Object.keys(i).forEach((function(i){e===i&&(t.disabledObj[e+"_isDisabled"]=!0)}))})),this.form["appointment_time"]&&-1===this.form["appointment_time"].indexOf("-")&&(this.form["appointment_time"]=this.$toTime(parseInt(this.form["appointment_time"]),"yyyy-MM-dd hh:mm:ss")),this.form["application_time"]&&-1===this.form["application_time"].indexOf("-")&&(this.form["application_time"]=this.$toTime(parseInt(this.form["application_time"]),"yyyy-MM-dd hh:mm:ss")),$.db.del("form"),e},get_obj_after:function(e,t){"0000-00-00 00:00:00"==this.form["appointment_time"]&&(this.form["appointment_time"]=null),parseInt(this.form["appointment_time"])>9999&&(this.form["appointment_time"]=this.$toTime(parseInt(this.form["appointment_time"]),"yyyy-MM-dd hh:mm:ss")),"0000-00-00 00:00:00"==this.form["application_time"]&&(this.form["application_time"]=null),parseInt(this.form["application_time"])>9999&&(this.form["application_time"]=this.$toTime(parseInt(this.form["application_time"]),"yyyy-MM-dd hh:mm:ss"))},submit_check:function(e){return e.appointment_time?e.application_time?null:"申请时间不能为空":"预约时间不能为空"},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/tourist_attraction_ticket_refund/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/tourist_attraction_ticket_refund/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/tourist_attraction_ticket_refund/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/tourist_attraction_ticket_refund/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/tourist_attraction_ticket_refund/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_regular_users()}},n=_,c=(i("8347"),i("2877")),l=Object(c["a"])(n,a,r,!1,null,null,null);t["default"]=l.exports},8347:function(e,t,i){"use strict";i("f039")},f039:function(e,t,i){}}]);