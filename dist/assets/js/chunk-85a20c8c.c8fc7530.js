(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85a20c8c"],{2127:function(e,r,s){},"8de2":function(e,r,s){"use strict";s("2127")},a957:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?s("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[s("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","product_name")||e.$check_field("add","product_name")||e.$check_field("set","product_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"商品名称",prop:"product_name"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","product_name")||!e.form["product_exchange_id"]&&e.$check_field("add","product_name")?s("el-input",{attrs:{id:"product_name",placeholder:"请输入商品名称",disabled:e.disabledObj["product_name_isDisabled"]},model:{value:e.form["product_name"],callback:function(r){e.$set(e.form,"product_name",r)},expression:"form['product_name']"}}):e.$check_field("get","product_name")?s("div",[e._v(e._s(e.form["product_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","product_type")||e.$check_field("add","product_type")||e.$check_field("set","product_type")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"商品类型",prop:"product_type"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","product_type")||!e.form["product_exchange_id"]&&e.$check_field("add","product_type")?s("el-input",{attrs:{id:"product_type",placeholder:"请输入商品类型",disabled:e.disabledObj["product_type_isDisabled"]},model:{value:e.form["product_type"],callback:function(r){e.$set(e.form,"product_type",r)},expression:"form['product_type']"}}):e.$check_field("get","product_type")?s("div",[e._v(e._s(e.form["product_type"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","required_points")||e.$check_field("add","required_points")||e.$check_field("set","required_points")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"所需积分",prop:"required_points"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","required_points")||!e.form["product_exchange_id"]&&e.$check_field("add","required_points")?s("el-input-number",{attrs:{id:"required_points",disabled:e.disabledObj["required_points_isDisabled"]},model:{value:e.form["required_points"],callback:function(r){e.$set(e.form,"required_points",e._n(r))},expression:"form['required_points']"}}):e.$check_field("get","required_points")?s("div",[e._v(e._s(e.form["required_points"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","regular_users")||e.$check_field("add","regular_users")||e.$check_field("set","regular_users")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"普通用户",prop:"regular_users"}},["管理员"!==e.user_group?s("div",[e._v(" "+e._s(e.get_user_session_regular_users(e.form["regular_users"]))+" "),"管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","regular_users")||!e.form["product_exchange_id"]&&e.$check_field("add","regular_users")?s("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(r){e.$set(e.form,"regular_users",r)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","regular_users")?s("el-select",{attrs:{id:"regular_users",disabled:!0},model:{value:e.form["regular_users"],callback:function(r){e.$set(e.form,"regular_users",r)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):s("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(r){e.$set(e.form,"regular_users",r)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","user_name")||!e.form["product_exchange_id"]&&e.$check_field("add","user_name")?s("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(r){e.$set(e.form,"user_name",r)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?s("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_points")||e.$check_field("add","user_points")||e.$check_field("set","user_points")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"用户积分",prop:"user_points"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","user_points")||!e.form["product_exchange_id"]&&e.$check_field("add","user_points")?s("el-input-number",{attrs:{id:"user_points",disabled:e.disabledObj["user_points_isDisabled"]},model:{value:e.form["user_points"],callback:function(r){e.$set(e.form,"user_points",e._n(r))},expression:"form['user_points']"}}):e.$check_field("get","user_points")?s("div",[e._v(e._s(e.form["user_points"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","contact_phone_number")||e.$check_field("add","contact_phone_number")||e.$check_field("set","contact_phone_number")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"联系电话",prop:"contact_phone_number"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","contact_phone_number")||!e.form["product_exchange_id"]&&e.$check_field("add","contact_phone_number")?s("el-input",{attrs:{id:"contact_phone_number",placeholder:"请输入联系电话",disabled:e.disabledObj["contact_phone_number_isDisabled"]},model:{value:e.form["contact_phone_number"],callback:function(r){e.$set(e.form,"contact_phone_number",r)},expression:"form['contact_phone_number']"}}):e.$check_field("get","contact_phone_number")?s("div",[e._v(e._s(e.form["contact_phone_number"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_address")||e.$check_field("add","user_address")||e.$check_field("set","user_address")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"用户地址",prop:"user_address"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","user_address")||!e.form["product_exchange_id"]&&e.$check_field("add","user_address")?s("el-input",{attrs:{id:"user_address",placeholder:"请输入用户地址",disabled:e.disabledObj["user_address_isDisabled"]},model:{value:e.form["user_address"],callback:function(r){e.$set(e.form,"user_address",r)},expression:"form['user_address']"}}):e.$check_field("get","user_address")?s("div",[e._v(e._s(e.form["user_address"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","exchange_quantity")||e.$check_field("add","exchange_quantity")||e.$check_field("set","exchange_quantity")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"兑换数量",prop:"exchange_quantity"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","exchange_quantity")||!e.form["product_exchange_id"]&&e.$check_field("add","exchange_quantity")?s("el-input-number",{attrs:{id:"exchange_quantity",disabled:e.disabledObj["exchange_quantity_isDisabled"]},model:{value:e.form["exchange_quantity"],callback:function(r){e.$set(e.form,"exchange_quantity",e._n(r))},expression:"form['exchange_quantity']"}}):e.$check_field("get","exchange_quantity")?s("div",[e._v(e._s(e.form["exchange_quantity"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","redeem_points")||e.$check_field("add","redeem_points")||e.$check_field("set","redeem_points")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"兑换积分",prop:"redeem_points"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","redeem_points")||!e.form["product_exchange_id"]&&e.$check_field("add","redeem_points")?s("el-input",{attrs:{id:"redeem_points",placeholder:"请输入兑换积分",disabled:e.disabledObj["redeem_points_isDisabled"]},on:{focus:function(r){return e.set_redeem_points()}},model:{value:e.form["redeem_points"],callback:function(r){e.$set(e.form,"redeem_points",r)},expression:"form['redeem_points']"}}):e.$check_field("get","redeem_points")?s("div",[e._v(e._s(e.form["redeem_points"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","registration_number")||e.$check_field("add","registration_number")||e.$check_field("set","registration_number")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"登记单号",prop:"registration_number"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","registration_number")||!e.form["product_exchange_id"]&&e.$check_field("add","registration_number")?s("el-input",{attrs:{id:"registration_number",placeholder:"请输入登记单号",disabled:e.disabledObj["registration_number_isDisabled"]},model:{value:e.form["registration_number"],callback:function(r){e.$set(e.form,"registration_number",r)},expression:"form['registration_number']"}}):e.$check_field("get","registration_number")?s("div",[e._v(e._s(e.form["registration_number"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","logistics_status")||e.$check_field("add","logistics_status")||e.$check_field("set","logistics_status")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"物流状态",prop:"logistics_status"}},["管理员"===e.user_group||e.form["product_exchange_id"]&&e.$check_field("set","logistics_status")||!e.form["product_exchange_id"]&&e.$check_field("add","logistics_status")?s("el-select",{attrs:{id:"logistics_status"},model:{value:e.form["logistics_status"],callback:function(r){e.$set(e.form,"logistics_status",r)},expression:"form['logistics_status']"}},e._l(e.list_logistics_status,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1):e.$check_field("get","logistics_status")?s("div",[e._v(e._s(e.form["logistics_status"]))]):e._e()],1)],1):e._e()],1),s("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/product_exchange/view","set")||e.$check_action("/product_exchange/view","add")||e.$check_option("/product_exchange/table","examine")?s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submit()}}},[e._v("提交")]),s("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("取消")])],1):s("el-form-item",[s("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},_=[],i=(s("b64b"),s("159b"),s("96cf"),s("1da1")),a=s("c6e7"),o={mixins:[a["a"]],data:function(){return{field:"product_exchange_id",url_add:"~/api/product_exchange/add?",url_set:"~/api/product_exchange/set?",url_get_obj:"~/api/product_exchange/get_obj?",url_upload:"~/api/product_exchange/upload?",query:{product_exchange_id:0},form:{product_name:"",product_type:"",required_points:0,regular_users:0,user_name:"",user_points:0,contact_phone_number:"",user_address:"",exchange_quantity:0,redeem_points:"",registration_number:"",logistics_status:"",product_exchange_id:0},disabledObj:{product_name_isDisabled:!1,product_type_isDisabled:!1,required_points_isDisabled:!1,regular_users_isDisabled:!1,user_name_isDisabled:!1,user_points_isDisabled:!1,contact_phone_number_isDisabled:!1,user_address_isDisabled:!1,exchange_quantity_isDisabled:!1,redeem_points_isDisabled:!1,registration_number_isDisabled:!1,logistics_status_isDisabled:!1},list_user_regular_users:[],group_user_regular_users:"",list_logistics_status:["待发货","已发货","运输中","已完成"]}},methods:{get_list_user_regular_users:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:s=r.sent,s.result&&s.result.list?e.list_user_regular_users=s.result.list:s.error&&console.error(s.error);case 4:case"end":return r.stop()}}),r)})))()},get_group_user_regular_users:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.form["regular_users"]=e.user.user_id,r.next=3,e.$get("~/api/user_group/get_obj?name=普通用户");case 3:s=r.sent,s.result&&s.result.obj?e.group_user_regular_users=s.result.obj:s.error&&console.error(s.error);case 5:case"end":return r.stop()}}),r)})))()},get_user_session_regular_users:function(e){var r=this,s={user_id:e},t="~/api/"+r.group_user_regular_users.source_table+"/get_obj?";this.$get(t,s,(function(s){if(s.result&&s.result.obj){var t=[];for(var _ in s.result.obj)t.push(_);var i=[];for(var a in r.form)i.push(a);r.form["regular_users"]=e,r.disabledObj["regular_users_isDisabled"]=!0;for(var o=0;o<t.length;o++)if("examine_state"!==t[o]&&"examine_reply"!==t[o])for(var u=0;u<i.length;u++)if(t[o]===i[u]){if("regular_users"!==t[o]){r.form[i[u]]=s.result.obj[t[o]],r.disabledObj[i[u]+"_isDisabled"]=!0;break}r.disabledObj[i[u]+"_isDisabled"]=!0}}}))},get_user_regular_users:function(e){var r=this.list_user_regular_users.getObj({user_id:e}),s="";return r&&(s=r.nickname?r.nickname:r.username),s},set_redeem_points:function(){this.form.redeem_points=parseFloat(this.form.required_points)*parseFloat(this.form.exchange_quantity)},get_obj_before:function(e){var r=this,s="";return s=$.db.get("form"),$.push(this.form,s),this.form&&s&&Object.keys(this.form).forEach((function(e){Object.keys(s).forEach((function(s){e===s&&(r.disabledObj[e+"_isDisabled"]=!0)}))})),$.db.del("form"),e},get_obj_after:function(e,r){},submit_check:function(e){return null},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/product_exchange/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/product_exchange/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/product_exchange/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/product_exchange/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/product_exchange/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_regular_users(),this.get_group_user_regular_users()}},u=o,c=(s("8de2"),s("2877")),l=Object(c["a"])(u,t,_,!1,null,null,null);r["default"]=l.exports}}]);