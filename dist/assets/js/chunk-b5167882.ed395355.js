(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5167882"],{"14db":function(e,t,s){},"30ca":function(e,t,s){"use strict";s("14db")},"5b03":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?s("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[s("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","homestay_name")||e.$check_field("add","homestay_name")||e.$check_field("set","homestay_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"民宿名称",prop:"homestay_name"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","homestay_name")||!e.form["homestay_reservation_id"]&&e.$check_field("add","homestay_name")?s("el-input",{attrs:{id:"homestay_name",placeholder:"请输入民宿名称",disabled:e.disabledObj["homestay_name_isDisabled"]},model:{value:e.form["homestay_name"],callback:function(t){e.$set(e.form,"homestay_name",t)},expression:"form['homestay_name']"}}):e.$check_field("get","homestay_name")?s("div",[e._v(e._s(e.form["homestay_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","homestay_address")||e.$check_field("add","homestay_address")||e.$check_field("set","homestay_address")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"民宿地址",prop:"homestay_address"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","homestay_address")||!e.form["homestay_reservation_id"]&&e.$check_field("add","homestay_address")?s("el-input",{attrs:{id:"homestay_address",placeholder:"请输入民宿地址",disabled:e.disabledObj["homestay_address_isDisabled"]},model:{value:e.form["homestay_address"],callback:function(t){e.$set(e.form,"homestay_address",t)},expression:"form['homestay_address']"}}):e.$check_field("get","homestay_address")?s("div",[e._v(e._s(e.form["homestay_address"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","homestay_room_type")||e.$check_field("add","homestay_room_type")||e.$check_field("set","homestay_room_type")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"民宿房型",prop:"homestay_room_type"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","homestay_room_type")||!e.form["homestay_reservation_id"]&&e.$check_field("add","homestay_room_type")?s("el-input",{attrs:{id:"homestay_room_type",placeholder:"请输入民宿房型",disabled:e.disabledObj["homestay_room_type_isDisabled"]},model:{value:e.form["homestay_room_type"],callback:function(t){e.$set(e.form,"homestay_room_type",t)},expression:"form['homestay_room_type']"}}):e.$check_field("get","homestay_room_type")?s("div",[e._v(e._s(e.form["homestay_room_type"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","homestay_prices")||e.$check_field("add","homestay_prices")||e.$check_field("set","homestay_prices")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"民宿价格",prop:"homestay_prices"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","homestay_prices")||!e.form["homestay_reservation_id"]&&e.$check_field("add","homestay_prices")?s("el-input-number",{attrs:{id:"homestay_prices",disabled:e.disabledObj["homestay_prices_isDisabled"]},model:{value:e.form["homestay_prices"],callback:function(t){e.$set(e.form,"homestay_prices",e._n(t))},expression:"form['homestay_prices']"}}):e.$check_field("get","homestay_prices")?s("div",[e._v(e._s(e.form["homestay_prices"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","regular_users")||e.$check_field("add","regular_users")||e.$check_field("set","regular_users")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"普通用户",prop:"regular_users"}},["管理员"!==e.user_group?s("div",[e._v(" "+e._s(e.get_user_session_regular_users(e.form["regular_users"]))+" "),"管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","regular_users")||!e.form["homestay_reservation_id"]&&e.$check_field("add","regular_users")?s("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(t){e.$set(e.form,"regular_users",t)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","regular_users")?s("el-select",{attrs:{id:"regular_users",disabled:!0},model:{value:e.form["regular_users"],callback:function(t){e.$set(e.form,"regular_users",t)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):s("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(t){e.$set(e.form,"regular_users",t)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return s("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","user_name")||!e.form["homestay_reservation_id"]&&e.$check_field("add","user_name")?s("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(t){e.$set(e.form,"user_name",t)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?s("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_quantity")||e.$check_field("add","appointment_quantity")||e.$check_field("set","appointment_quantity")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"预约数量",prop:"appointment_quantity"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","appointment_quantity")||!e.form["homestay_reservation_id"]&&e.$check_field("add","appointment_quantity")?s("el-input-number",{attrs:{id:"appointment_quantity",disabled:e.disabledObj["appointment_quantity_isDisabled"]},model:{value:e.form["appointment_quantity"],callback:function(t){e.$set(e.form,"appointment_quantity",e._n(t))},expression:"form['appointment_quantity']"}}):e.$check_field("get","appointment_quantity")?s("div",[e._v(e._s(e.form["appointment_quantity"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_days")||e.$check_field("add","appointment_days")||e.$check_field("set","appointment_days")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"预约天数",prop:"appointment_days"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","appointment_days")||!e.form["homestay_reservation_id"]&&e.$check_field("add","appointment_days")?s("el-input-number",{attrs:{id:"appointment_days",disabled:e.disabledObj["appointment_days_isDisabled"]},model:{value:e.form["appointment_days"],callback:function(t){e.$set(e.form,"appointment_days",e._n(t))},expression:"form['appointment_days']"}}):e.$check_field("get","appointment_days")?s("div",[e._v(e._s(e.form["appointment_days"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_time")||e.$check_field("add","appointment_time")||e.$check_field("set","appointment_time")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"预约时间",prop:"appointment_time"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","appointment_time")||!e.form["homestay_reservation_id"]&&e.$check_field("add","appointment_time")?s("el-date-picker",{attrs:{disabled:e.disabledObj["appointment_time_isDisabled"],id:"appointment_time",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form["appointment_time"],callback:function(t){e.$set(e.form,"appointment_time",t)},expression:"form['appointment_time']"}}):e.$check_field("get","appointment_time")?s("div",[e._v(e._s(e.form["appointment_time"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_amount")||e.$check_field("add","appointment_amount")||e.$check_field("set","appointment_amount")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"预约金额",prop:"appointment_amount"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","appointment_amount")||!e.form["homestay_reservation_id"]&&e.$check_field("add","appointment_amount")?s("el-input",{attrs:{id:"appointment_amount",placeholder:"请输入预约金额",disabled:e.disabledObj["appointment_amount_isDisabled"]},on:{focus:function(t){return e.set_appointment_amount()}},model:{value:e.form["appointment_amount"],callback:function(t){e.$set(e.form,"appointment_amount",t)},expression:"form['appointment_amount']"}}):e.$check_field("get","appointment_amount")?s("div",[e._v(e._s(e.form["appointment_amount"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","appointment_remarks")||e.$check_field("add","appointment_remarks")||e.$check_field("set","appointment_remarks")?s("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[s("el-form-item",{attrs:{label:"预约备注",prop:"appointment_remarks"}},["管理员"===e.user_group||e.form["homestay_reservation_id"]&&e.$check_field("set","appointment_remarks")||!e.form["homestay_reservation_id"]&&e.$check_field("add","appointment_remarks")?s("el-input",{attrs:{id:"appointment_remarks",placeholder:"请输入预约备注",disabled:e.disabledObj["appointment_remarks_isDisabled"]},model:{value:e.form["appointment_remarks"],callback:function(t){e.$set(e.form,"appointment_remarks",t)},expression:"form['appointment_remarks']"}}):e.$check_field("get","appointment_remarks")?s("div",[e._v(e._s(e.form["appointment_remarks"]))]):e._e()],1)],1):e._e()],1),s("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/homestay_reservation/view","set")||e.$check_action("/homestay_reservation/view","add")||e.$check_option("/homestay_reservation/table","examine")?s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")]),s("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1):s("el-form-item",[s("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},a=[],o=(s("b64b"),s("159b"),s("96cf"),s("1da1")),i=s("c6e7"),_={mixins:[i["a"]],data:function(){return{field:"homestay_reservation_id",url_add:"~/api/homestay_reservation/add?",url_set:"~/api/homestay_reservation/set?",url_get_obj:"~/api/homestay_reservation/get_obj?",url_upload:"~/api/homestay_reservation/upload?",query:{homestay_reservation_id:0},form:{homestay_name:"",homestay_address:"",homestay_room_type:"",homestay_prices:0,regular_users:0,user_name:"",appointment_quantity:0,appointment_days:0,appointment_time:"",appointment_amount:"",appointment_remarks:"",homestay_reservation_id:0},disabledObj:{homestay_name_isDisabled:!1,homestay_address_isDisabled:!1,homestay_room_type_isDisabled:!1,homestay_prices_isDisabled:!1,regular_users_isDisabled:!1,user_name_isDisabled:!1,appointment_quantity_isDisabled:!1,appointment_days_isDisabled:!1,appointment_time_isDisabled:!1,appointment_amount_isDisabled:!1,appointment_remarks_isDisabled:!1},list_user_regular_users:[],group_user_regular_users:""}},methods:{get_list_user_regular_users:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:s=t.sent,s.result&&s.result.list?e.list_user_regular_users=s.result.list:s.error&&console.error(s.error);case 4:case"end":return t.stop()}}),t)})))()},get_group_user_regular_users:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form["regular_users"]=e.user.user_id,t.next=3,e.$get("~/api/user_group/get_obj?name=普通用户");case 3:s=t.sent,s.result&&s.result.obj?e.group_user_regular_users=s.result.obj:s.error&&console.error(s.error);case 5:case"end":return t.stop()}}),t)})))()},get_user_session_regular_users:function(e){var t=this,s={user_id:e},r="~/api/"+t.group_user_regular_users.source_table+"/get_obj?";this.$get(r,s,(function(s){if(s.result&&s.result.obj){var r=[];for(var a in s.result.obj)r.push(a);var o=[];for(var i in t.form)o.push(i);t.form["regular_users"]=e,t.disabledObj["regular_users_isDisabled"]=!0;for(var _=0;_<r.length;_++)if("examine_state"!==r[_]&&"examine_reply"!==r[_])for(var n=0;n<o.length;n++)if(r[_]===o[n]){if("regular_users"!==r[_]){t.form[o[n]]=s.result.obj[r[_]],t.disabledObj[o[n]+"_isDisabled"]=!0;break}t.disabledObj[o[n]+"_isDisabled"]=!0}}}))},get_user_regular_users:function(e){var t=this.list_user_regular_users.getObj({user_id:e}),s="";return t&&(s=t.nickname?t.nickname:t.username),s},set_appointment_amount:function(){this.form.appointment_amount=parseFloat(this.form.homestay_prices)*parseFloat(this.form.appointment_quantity)*parseFloat(this.form.appointment_days)},get_obj_before:function(e){var t=this,s="";return s=$.db.get("form"),$.push(this.form,s),this.form&&s&&Object.keys(this.form).forEach((function(e){Object.keys(s).forEach((function(s){e===s&&(t.disabledObj[e+"_isDisabled"]=!0)}))})),this.form["appointment_time"]&&-1===this.form["appointment_time"].indexOf("-")&&(this.form["appointment_time"]=this.$toTime(parseInt(this.form["appointment_time"]),"yyyy-MM-dd hh:mm:ss")),$.db.del("form"),e},get_obj_after:function(e,t){"0000-00-00 00:00:00"==this.form["appointment_time"]&&(this.form["appointment_time"]=null),parseInt(this.form["appointment_time"])>9999&&(this.form["appointment_time"]=this.$toTime(parseInt(this.form["appointment_time"]),"yyyy-MM-dd hh:mm:ss"))},submit_check:function(e){return e.appointment_time?null:"预约时间不能为空"},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/homestay_reservation/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/homestay_reservation/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/homestay_reservation/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/homestay_reservation/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/homestay_reservation/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_regular_users(),this.get_group_user_regular_users()}},n=_,m=(s("30ca"),s("2877")),l=Object(m["a"])(n,r,a,!1,null,null,null);t["default"]=l.exports}}]);