(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84d52304"],{"1adb":function(e,r,s){"use strict";s("8e9a")},"8e9a":function(e,r,s){},d457:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?t("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[t("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","share_title")||e.$check_field("add","share_title")||e.$check_field("set","share_title")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"分享标题",prop:"share_title"}},["管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","share_title")||!e.form["forum_sharing_id"]&&e.$check_field("add","share_title")?t("el-input",{attrs:{id:"share_title",placeholder:"请输入分享标题",disabled:e.disabledObj["share_title_isDisabled"]},model:{value:e.form["share_title"],callback:function(r){e.$set(e.form,"share_title",r)},expression:"form['share_title']"}}):e.$check_field("get","share_title")?t("div",[e._v(e._s(e.form["share_title"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","sharing_categories")||e.$check_field("add","sharing_categories")||e.$check_field("set","sharing_categories")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"分享类别",prop:"sharing_categories"}},["管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","sharing_categories")||!e.form["forum_sharing_id"]&&e.$check_field("add","sharing_categories")?t("el-input",{attrs:{id:"sharing_categories",placeholder:"请输入分享类别",disabled:e.disabledObj["sharing_categories_isDisabled"]},model:{value:e.form["sharing_categories"],callback:function(r){e.$set(e.form,"sharing_categories",r)},expression:"form['sharing_categories']"}}):e.$check_field("get","sharing_categories")?t("div",[e._v(e._s(e.form["sharing_categories"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","share_time")||e.$check_field("add","share_time")||e.$check_field("set","share_time")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"分享时间",prop:"share_time"}},["管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","share_time")||!e.form["forum_sharing_id"]&&e.$check_field("add","share_time")?t("el-date-picker",{attrs:{disabled:e.disabledObj["share_time_isDisabled"],id:"share_time",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form["share_time"],callback:function(r){e.$set(e.form,"share_time",r)},expression:"form['share_time']"}}):e.$check_field("get","share_time")?t("div",[e._v(e._s(e.form["share_time"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","regular_users")||e.$check_field("add","regular_users")||e.$check_field("set","regular_users")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"普通用户",prop:"regular_users"}},["管理员"!==e.user_group?t("div",[e._v(" "+e._s(e.get_user_session_regular_users(e.form["regular_users"]))+" "),"管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","regular_users")||!e.form["forum_sharing_id"]&&e.$check_field("add","regular_users")?t("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(r){e.$set(e.form,"regular_users",r)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","regular_users")?t("el-select",{attrs:{id:"regular_users",disabled:!0},model:{value:e.form["regular_users"],callback:function(r){e.$set(e.form,"regular_users",r)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):t("el-select",{attrs:{id:"regular_users",disabled:e.disabledObj["regular_users_isDisabled"]},model:{value:e.form["regular_users"],callback:function(r){e.$set(e.form,"regular_users",r)},expression:"form['regular_users']"}},e._l(e.list_user_regular_users,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","share_description")||e.$check_field("add","share_description")||e.$check_field("set","share_description")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"分享描述",prop:"share_description"}},["管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","share_description")||!e.form["forum_sharing_id"]&&e.$check_field("add","share_description")?t("el-input",{attrs:{type:"textarea",id:"share_description",placeholder:"请输入分享描述",disabled:e.disabledObj["share_description_isDisabled"]},model:{value:e.form["share_description"],callback:function(r){e.$set(e.form,"share_description",r)},expression:"form['share_description']"}}):e.$check_field("get","share_description")?t("div",[e._v(e._s(e.form["share_description"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","cover_photo")||e.$check_field("add","cover_photo")||e.$check_field("set","cover_photo")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"封面图片",prop:"cover_photo"}},["管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","cover_photo")||!e.form["forum_sharing_id"]&&e.$check_field("add","cover_photo")?t("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.disabledObj["cover_photo_isDisabled"],id:"cover_photo",drag:"",accept:"image/gif, image/jpeg, image/png, image/jpg",action:"","http-request":e.upload_cover_photo,"show-file-list":!1}},[e.form["cover_photo"]?t("img",{staticClass:"avatar",attrs:{src:e.$fullUrl(e.form["cover_photo"])}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e.$check_field("get","cover_photo")?t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.$fullUrl(e.form["cover_photo"]),"preview-src-list":[e.$fullUrl(e.form["cover_photo"])]}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:s("84f9")}})])]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","sharing_content")||e.$check_field("add","sharing_content")||e.$check_field("set","sharing_content")?t("el-col",{staticClass:"el_form_editor_warp",attrs:{xs:24,sm:24,lg:24}},[t("el-form-item",{attrs:{label:"分享内容",prop:"sharing_content"}},["管理员"===e.user_group||e.form["forum_sharing_id"]&&e.$check_field("set","sharing_content")||!e.form["forum_sharing_id"]&&e.$check_field("add","sharing_content")?t("quill-editor",{model:{value:e.form["sharing_content"],callback:function(r){e.$set(e.form,"sharing_content",e._n(r))},expression:"form['sharing_content']"}}):e.$check_field("get","sharing_content")?t("div",{domProps:{innerHTML:e._s(e.form["sharing_content"])}}):e._e()],1)],1):e._e(),t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"审核状态",prop:"examine_state"}},["管理员"===e.user_group||e.form["examine_state"]&&e.$check_examine()||!e.form["examine_state"]&&e.$check_examine()?t("el-select",{attrs:{id:"examine_state"},model:{value:e.form["examine_state"],callback:function(r){e.$set(e.form,"examine_state",r)},expression:"form['examine_state']"}},[t("el-option",{key:"未审核",attrs:{label:"未审核",value:"未审核"}}),t("el-option",{key:"已通过",attrs:{label:"已通过",value:"已通过"}}),t("el-option",{key:"未通过",attrs:{label:"未通过",value:"未通过"}})],1):t("div",[e._v(e._s(e.form["examine_state"]))])],1)],1)],1),t("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/forum_sharing/view","set")||e.$check_action("/forum_sharing/view","add")||e.$check_option("/forum_sharing/table","examine")?t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submit()}}},[e._v("提交")]),t("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("取消")])],1):t("el-form-item",[t("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},i=[],a=(s("b64b"),s("159b"),s("96cf"),s("1da1")),o=s("c6e7"),_={mixins:[o["a"]],data:function(){return{field:"forum_sharing_id",url_add:"~/api/forum_sharing/add?",url_set:"~/api/forum_sharing/set?",url_get_obj:"~/api/forum_sharing/get_obj?",url_upload:"~/api/forum_sharing/upload?",query:{forum_sharing_id:0},form:{share_title:"",sharing_categories:"",share_time:"",regular_users:0,share_description:"",cover_photo:"",sharing_content:"",examine_state:"未审核",forum_sharing_id:0},disabledObj:{share_title_isDisabled:!1,sharing_categories_isDisabled:!1,share_time_isDisabled:!1,regular_users_isDisabled:!1,share_description_isDisabled:!1,cover_photo_isDisabled:!1,sharing_content_isDisabled:!1},list_user_regular_users:[],group_user_regular_users:""}},methods:{get_list_user_regular_users:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:s=r.sent,s.result&&s.result.list?e.list_user_regular_users=s.result.list:s.error&&console.error(s.error);case 4:case"end":return r.stop()}}),r)})))()},get_group_user_regular_users:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.form["regular_users"]=e.user.user_id,r.next=3,e.$get("~/api/user_group/get_obj?name=普通用户");case 3:s=r.sent,s.result&&s.result.obj?e.group_user_regular_users=s.result.obj:s.error&&console.error(s.error);case 5:case"end":return r.stop()}}),r)})))()},get_user_session_regular_users:function(e){var r=this,s={user_id:e},t="~/api/"+r.group_user_regular_users.source_table+"/get_obj?";this.$get(t,s,(function(s){if(s.result&&s.result.obj){var t=[];for(var i in s.result.obj)t.push(i);var a=[];for(var o in r.form)a.push(o);r.form["regular_users"]=e,r.disabledObj["regular_users_isDisabled"]=!0;for(var _=0;_<t.length;_++)if("examine_state"!==t[_]&&"examine_reply"!==t[_])for(var l=0;l<a.length;l++)if(t[_]===a[l]){if("regular_users"!==t[_]){r.form[a[l]]=s.result.obj[t[_]],r.disabledObj[a[l]+"_isDisabled"]=!0;break}r.disabledObj[a[l]+"_isDisabled"]=!0}}}))},get_user_regular_users:function(e){var r=this.list_user_regular_users.getObj({user_id:e}),s="";return r&&(s=r.nickname?r.nickname:r.username),s},upload_cover_photo:function(e){this.uploadFile(e.file,"cover_photo")},get_obj_before:function(e){var r=this,s="";return this.form&&s&&Object.keys(this.form).forEach((function(e){Object.keys(s).forEach((function(s){e===s&&(r.disabledObj[e+"_isDisabled"]=!0)}))})),this.form["share_time"]&&-1===this.form["share_time"].indexOf("-")&&(this.form["share_time"]=this.$toTime(parseInt(this.form["share_time"]),"yyyy-MM-dd hh:mm:ss")),$.db.del("form"),e},get_obj_after:function(e,r){"0000-00-00 00:00:00"==this.form["share_time"]&&(this.form["share_time"]=null),parseInt(this.form["share_time"])>9999&&(this.form["share_time"]=this.$toTime(parseInt(this.form["share_time"]),"yyyy-MM-dd hh:mm:ss"))},submit_check:function(e){return e.share_time?null:"分享时间不能为空"},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/forum_sharing/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/forum_sharing/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/forum_sharing/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/forum_sharing/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/forum_sharing/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_regular_users(),this.get_group_user_regular_users()}},l=_,c=(s("1adb"),s("2877")),u=Object(c["a"])(l,t,i,!1,null,null,null);r["default"]=u.exports}}]);