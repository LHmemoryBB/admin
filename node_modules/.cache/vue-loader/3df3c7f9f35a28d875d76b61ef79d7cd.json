{"remainingRequest":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.27_vue@3.4.27_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/views/index.vue?vue&type=style&index=0&id=a83bd3b0&scoped=scoped&lang=css","dependencies":[{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/views/index.vue","mtime":1708412370000},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js","mtime":1715580217028},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.27_vue@3.4.27_webpack@4.47.0/node_modules/vue-loader/dist/stylePostLoader.js","mtime":1715580215955},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js","mtime":1715580220276},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1713866850089},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.27_vue@3.4.27_webpack@4.47.0/node_modules/vue-loader/dist/index.js","mtime":1715580215952}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJLmNoYXJ0IHsNCgkJZGlzcGxheTogYmxvY2s7DQoJCXdpZHRoOiAxMDAlOw0KCQloZWlnaHQ6IDQwMHB4Ow0KCQlwYWRkaW5nOiAxcmVtOw0KCQlwb3NpdGlvbjogcmVsYXRpdmU7DQoJfQ0KDQoJLmVsLWNvbCB7DQoJCXBhZGRpbmc6IDAuNXJlbTsNCgl9DQoNCgkuY2FyZCB7DQoJCW92ZXJmbG93OiBoaWRkZW47DQoJfQ0KDQoJLmlmcmFtZV9ib3ggLC5pZnJhbWVfYm94X2NoYW5nZXsNCgkJd2lkdGg6IDEwMCU7DQoJCWhlaWdodDogMTE4MHB4Ow0KCQlwb3NpdGlvbjogcmVsYXRpdmU7DQoJCW1hcmdpbi10b3A6IDI1cHg7DQoJfQ0KCS5pZnJhbWVfYm94X2NoYW5nZXsNCgkJaGVpZ2h0OiA1ODBweDsNCgkJcGFkZGluZy10b3A6IDUwcHg7DQoJfQ0KCS5pZnJhbWVfYm94CS5pZnJhbWVfYm94X2NvbnRlbnQsIC5pZnJhbWVfYm94X2NoYW5nZSAuaWZyYW1lX2JveF9jb250ZW50ew0KCQl3aWR0aDogMTAwJTsNCgkJaGVpZ2h0OiAxMDAlOw0KCX0NCgkuaWZyYW1lX2JveF90b3B7DQoJCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgkJdG9wOiAwOw0KCQlsZWZ0OiAwOw0KCQl3aWR0aDogMTAwJTsNCgkJaGVpZ2h0OiAxMDBweDsNCgkJZm9udC1zaXplOiAyNXB4Ow0KCQlsaW5lLWhlaWdodDogMTAwcHg7DQoJCWJhY2tncm91bmQ6ICNmZmY7DQoJCXotaW5kZXg6IDk5OTk5OTk5Ow0KCQlwYWRkaW5nLWxlZnQ6IDUwcHg7DQoJfQ0KCSNpZnJhbWVfYm94X2ZhY2UgZGl2OjpiZWZvcmUgew0KCQljb250ZW50OiAnJzsNCgkJd2lkdGg6IDEwMHB4Ow0KCQlwb3NpdGlvbjogYWJzb2x1dGU7DQoJCXRvcDogMTU0cHg7DQoJCXJpZ2h0OiAxMjlweDsNCgkJei1pbmRleDogOTk5Ow0KCQloZWlnaHQ6IDIwcHg7DQoJCWJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQoJfQ0KDQoJI2lmcmFtZV9ib3hfZmFjZT5oMSB7DQoJCW1hcmdpbi10b3A6IDEwMHB4Ow0KCQltYXJnaW4tYm90dG9tOiAyMHB4Ow0KCX0NCg=="},{"version":3,"sources":["/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/views/index.vue"],"names":[],"mappings":"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","file":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/views/index.vue","sourceRoot":"","sourcesContent":["<template>\r\n\t<div class=\"page_root\" id=\"root_index\">\r\n\t\t<div class=\"warp\">\r\n\t\t\t<div class=\"container-fluid\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t\t<div_label bg_color=\"bg_purple\" icon=\"el-icon-user-solid\" :url=\"url_user_count\" unit=\"人\"\r\n\t\t\t\t\t\t\t\t  title=\"用户数量\"></div_label>\r\n\t\t\t\t\t</el-col>\r\n<!--\t\t\t\t\t<el-col :span=\"4\">-->\r\n<!--\t\t\t\t\t\t<div_label bg_color=\"bg_green\" icon=\"el-icon-view\" :url=\"url_article_hits\" unit=\"次\"-->\r\n<!--\t\t\t\t\t\t\t\t  title=\"文章浏览量\"></div_label>-->\r\n<!--\t\t\t\t\t</el-col>-->\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t\t\t\t\t<el-col v-if=\"user_group == '管理员' || $check_figure('/attraction_reservation/table')\" :span=\"8\">\r\n\t\t\t\t\t\t<div class=\"card chart\">\r\n\t\t\t\t\t\t\t\t\t<newLineChart v-if=\"line_obj_attraction_reservation.values.length > 0\" id=\"line_obj_attraction_reservation\" :vm=\"line_obj_attraction_reservation\" :title=\"'景点预约统计'\">\r\n\t\t\t\t\t\t\t</newLineChart>\r\n\t\t\t\t\t\t\t<div v-if=\"!line_obj_attraction_reservation.values.length\">景点预约没有符合条件的数据</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t\t\t\t<el-col v-if=\"user_group == '管理员' || $check_figure('/homestay_reservation/table')\" :span=\"8\">\r\n\t\t\t\t\t\t<div class=\"card chart\">\r\n\t\t\t\t\t\t\t\t\t<stackedHorizontalBarChart v-if=\"bar_obj_homestay_reservation.values.length > 0\" id=\"bar_obj_homestay_reservation\" :vm=\"bar_obj_homestay_reservation\" :title=\"'民宿预约统计'\">\r\n\t\t\t\t\t\t\t</stackedHorizontalBarChart>\r\n\t\t\t\t\t\t\t<div v-if=\"!bar_obj_homestay_reservation.values.length\">民宿预约没有符合条件的数据</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t\t\t<el-col v-if=\"user_group == '管理员' || $check_figure('/product_exchange/table')\" :span=\"8\">\r\n\t\t\t\t\t\t<div class=\"card chart\">\r\n\t\t\t\t\t\t\t\t\t<newBarChart v-if=\"bar_obj_product_exchange.values.length > 0\" id=\"bar_obj_product_exchange\" :vm=\"bar_obj_product_exchange\" :title=\"'商品兑换统计'\">\r\n\t\t\t\t\t\t\t</newBarChart>\r\n\t\t\t\t\t\t\t<div v-if=\"!bar_obj_product_exchange.values.length\">商品兑换没有符合条件的数据</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t</el-row>\r\n\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport mixin from \"@/mixins/page.js\";\r\n\timport newBarChart from \"@/components/charts/new_bar_chart\";\r\n\timport newLineChart from \"@/components/charts/new_line_chart\";\r\n\timport stackedHorizontalBarChart from \"@/components/charts/stacked_horizontal_bar_chart\";\r\n\timport div_label from \"@/components/div_label.vue\";\r\n\texport default {\r\n\t\tmixins: [mixin],\r\n\t\tname: \"Home\",\r\n\t\tcomponents: {\r\n\t\t\tnewBarChart,\r\n\t\t\tnewLineChart,\r\n\t\t\tstackedHorizontalBarChart,\r\n\t\t\tdiv_label\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tactiveName: \"third\",\r\n\t\t\t\t\t\t\t\t\t\t\tline_obj_attraction_reservation:{\r\n\t\t\t\t\tnames:[],\r\n\t\t\t\t\txAxis: [],\r\n\t\t\t\t\tvalues:[]\r\n\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbar_obj_homestay_reservation: {\r\n\t\t\t\t\tnames:[],\r\n\t\t\t\t\txAxis: [],\r\n\t\t\t\t\tvalues:[]\r\n\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tbar_obj_product_exchange: {\r\n\t\t\t\t\tnames:[],\r\n\t\t\t\t\txAxis: [],\r\n\t\t\t\t\tvalues:[]\r\n\t\t\t\t},\r\n\t\t\t\t\t\t\turl_user_count: \"~/api/user/count?\",\r\n\t\t\t\turl_article_hits: \"~/api/article/sum?field=hits\",\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t\t\t\t\t// 执行景点预约数据获取\r\n\t\t\tthis.get_list_attraction_reservation();\r\n\t\t\t\t\t\t\t\t\t// 执行民宿预约数据获取\r\n\t\t\tthis.get_list_homestay_reservation();\r\n\t\t\t\t\t\t\t\t// 执行商品兑换数据获取\r\n\t\t\tthis.get_list_product_exchange();\r\n\t\t\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tasync get_nickname(list,flag){\r\n\t\t\t\tif (flag) {\r\n\t\t\t\t\tfor (let i=0;i<list.length;i++){\r\n\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\t\t\t\"~/api/user/get_obj?user_id=\"+list[i],\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\t\t\t\tlist[i] = json.result.obj.nickname;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\t\tfor (let i=0;i<list.length;i++){\r\n\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\t\t\t\"~/api/user/get_obj?user_id=\"+list[i].name,\r\n\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\t\t\t\tlist[i].name = json.result.obj.nickname;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t// 获取景点预约统计图数据\r\n\t\t\tasync get_list_attraction_reservation() {\r\n\t\t\t\t\t\t\t\t\tlet group_by_value = \"attraction_name\";\r\n\t\t\t\tlet data = {};\r\n\t\t\t\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet user_group = this.$store.state.user.user_group;\r\n\t\t\t\tlet user_id = this.$store.state.user.user_id;\r\n\t\t\t\tif (user_group!='管理员'){\r\n\t\t\t\t\t\t\t\t\t\tlet sqlwhere = \"(\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user_group==\"普通用户\"){\r\n\t\t\t\t\t\tsqlwhere+= \"regular_users = \" + user_id + \" or \";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sqlwhere.length>1){\r\n\t\t\t\t\t\tsqlwhere = sqlwhere.substr(0,sqlwhere.length-4);\r\n\t\t\t\t\t\tsqlwhere += \")\";\r\n\t\t\t\t\t\tdata.sqlwhere = sqlwhere;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\"~/api/attraction_reservation/get_list?groupby=\"+group_by_value,data,\r\n\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\tlet list = json.result.list;\r\n\t\t\t\t\t\t\tlet name_list = [];\r\n\t\t\t\t\t\t\tfor (let i=0;i<list.length;i++){\r\n\t\t\t\t\t\t\t\tname_list.push(list[i].attraction_name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.line_obj_attraction_reservation.names = name_list;\r\n\t\t\t\t\t\t\tthis.get_list_attraction_reservation_sub(\"attraction_name\",flag);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\tasync get_list_attraction_reservation_sub(v1,names_flag) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet data = {};\r\n\t\t\t\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet user_group = this.$store.state.user.user_group;\r\n\t\t\t\tlet user_id = this.$store.state.user.user_id;\r\n\t\t\t\tif (user_group!='管理员'){\r\n\t\t\t\t\t\t\t\t\t\tlet sqlwhere = \"(\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user_group==\"普通用户\"){\r\n\t\t\t\t\t\tsqlwhere+= \"regular_users = \" + user_id + \" or \";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sqlwhere.length>1){\r\n\t\t\t\t\t\tsqlwhere = sqlwhere.substr(0,sqlwhere.length-4);\r\n\t\t\t\t\t\tsqlwhere += \")\";\r\n\t\t\t\t\t\tdata.sqlwhere = sqlwhere;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\"~/api/attraction_reservation/get_list?groupby=appointment_time\",data,\r\n\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\tlet list = json.result.list;\r\n\t\t\t\t\t\t\tlet xAxis_list = [];\r\n\t\t\t\t\t\t\tfor (let i=0;i<list.length;i++){\r\n\t\t\t\t\t\t\t\t\t\t\t\txAxis_list.push(this.$toTime(list[i].appointment_time ,\"yyyy-MM-dd\"));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.line_obj_attraction_reservation.xAxis = xAxis_list;\r\n\t\t\t\t\t\t\tthis.get_list_attraction_reservation_sub_sub(v1,\"appointment_time\",names_flag,flag);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\tasync get_list_attraction_reservation_sub_sub(v1,v2,names_flag,xAxis_flag) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet data_str = \"{\\\"\"+v1+\"\\\":\\\"\\\",\\\"\"+v2+\"\\\":\\\"\\\"}\";\r\n\t\t\t\tlet data = JSON.parse(data_str);\r\n\t\t\t\t\t\t\t\tlet user_group = this.$store.state.user.user_group;\r\n\t\t\t\tlet user_id = this.$store.state.user.user_id;\r\n\t\t\t\tif (user_group!='管理员'){\r\n\t\t\t\t\t\t\t\t\t\tlet sqlwhere = \"(\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user_group==\"普通用户\"){\r\n\t\t\t\t\t\t\tsqlwhere+= \"regular_users = \" + user_id + \" or \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sqlwhere.length>1){\r\n\t\t\t\t\t\t\tsqlwhere = sqlwhere.substr(0,sqlwhere.length-4);\r\n\t\t\t\t\t\t\tsqlwhere += \")\";\r\n\t\t\t\t\t\t\tdata.sqlwhere = sqlwhere;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (let i=0;i<this.line_obj_attraction_reservation.xAxis.length;i++){\r\n\t\t\t\t\tlet list = []\r\n\t\t\t\t\tfor (let j=0;j<this.line_obj_attraction_reservation.names.length;j++){\r\n\t\t\t\t\t\tdata[v2] = this.line_obj_attraction_reservation.xAxis[i];\r\n\t\t\t\t\t\tdata[v1] = this.line_obj_attraction_reservation.names[j];\r\n\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\t\t\t\"~/api/attraction_reservation/sum?field=number_of_reservations\",\r\n\t\t\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\t\t\t\tlist[j] = json.result;\r\n\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\tlist[j] = 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.line_obj_attraction_reservation.values.push(list)\r\n\t\t\t\t}\r\n\t\t\t\tif (names_flag){\r\n\t\t\t\t\tthis.get_nickname(this.line_obj_attraction_reservation.names,true);\r\n\t\t\t\t}\r\n\t\t\t\tif (xAxis_flag){\r\n\t\t\t\t\tthis.get_nickname(this.line_obj_attraction_reservation.xAxis,true);\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// 获取民宿预约统计图\r\n\t\t\tasync get_list_homestay_reservation() {\r\n\t\t\t\tlet name_list = [];\r\n\t\t\t\tlet query_str = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet group_by_value = \"homestay_room_type\";\r\n\t\t\t\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet date_flag = \"其他\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname_list.push(\"预约数量\");\r\n\t\t\t\tquery_str = query_str+\"appointment_quantity\"+\",\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.bar_obj_homestay_reservation.names = name_list\r\n\t\t\t\tquery_str = query_str.substr(0,query_str.length-1);\r\n\t\t\t\tlet data = {};\r\n\t\t\t\t\t\tlet user_group = this.$store.state.user.user_group;\r\n\t\t\t\tlet user_id = this.$store.state.user.user_id;\r\n\t\t\t\tif (user_group!='管理员'){\r\n\t\t\t\t\t\t\t\tlet sqlwhere = \"(\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user_group==\"普通用户\"){\r\n\t\t\t\t\t\tsqlwhere+= \"regular_users = \" + user_id + \" or \";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sqlwhere.length>1){\r\n\t\t\t\t\t\tsqlwhere = sqlwhere.substr(0,sqlwhere.length-4);\r\n\t\t\t\t\t\tsqlwhere += \")\";\r\n\t\t\t\t\t\tdata.sqlwhere = sqlwhere;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\t\"~/api/homestay_reservation/bar_group?field=\"+query_str+\"&groupby=\"+group_by_value,\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\t\tlet xAxis = [];\r\n\t\t\t\t\t\t\t\tlet values = [];\r\n\t\t\t\t\t\t\t\tjson.result.list.map((o) => {\r\n\t\t\t\t\t\t\t\t\tif (date_flag === \"日期\") {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(this.$toTime(o[0] ,\"yyyy-MM-dd\"));\r\n\t\t\t\t\t\t\t\t\t}else if (date_flag === \"时间\") {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(this.$toTime(o[0] ,\"hh:mm:ss\"));\r\n\t\t\t\t\t\t\t\t\t}else if (date_flag === \"日长\") {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(this.$toTime(o[0] ,\"yyyy-MM-dd hh:mm:ss\"));\r\n\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(o[0]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvalues.push(o.splice(1))\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.bar_obj_homestay_reservation.xAxis = xAxis;\r\n\t\t\t\t\t\t\t\tthis.bar_obj_homestay_reservation.values = values;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (flag){\r\n\t\t\t\t\t\t\t\tthis.get_nickname(this.bar_obj_homestay_reservation.xAxis,true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t// 获取商品兑换统计图\r\n\t\t\tasync get_list_product_exchange() {\r\n\t\t\t\tlet name_list = [];\r\n\t\t\t\tlet query_str = \"\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet group_by_value = \"product_type\";\r\n\t\t\t\t\t\t\t\tlet flag = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet date_flag = \"其他\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname_list.push(\"兑换数量\");\r\n\t\t\t\tquery_str = query_str+\"exchange_quantity\"+\",\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.bar_obj_product_exchange.names = name_list\r\n\t\t\t\tquery_str = query_str.substr(0,query_str.length-1);\r\n\t\t\t\tlet data = {};\r\n\t\t\t\t\t\tlet user_group = this.$store.state.user.user_group;\r\n\t\t\t\tlet user_id = this.$store.state.user.user_id;\r\n\t\t\t\tif (user_group!='管理员'){\r\n\t\t\t\t\t\t\t\tlet sqlwhere = \"(\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user_group==\"普通用户\"){\r\n\t\t\t\t\t\tsqlwhere+= \"regular_users = \" + user_id + \" or \";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sqlwhere.length>1){\r\n\t\t\t\t\t\tsqlwhere = sqlwhere.substr(0,sqlwhere.length-4);\r\n\t\t\t\t\t\tsqlwhere += \")\";\r\n\t\t\t\t\t\tdata.sqlwhere = sqlwhere;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tawait this.$get(\r\n\t\t\t\t\t\t\"~/api/product_exchange/bar_group?field=\"+query_str+\"&groupby=\"+group_by_value,\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\t\tlet xAxis = [];\r\n\t\t\t\t\t\t\t\tlet values = [];\r\n\t\t\t\t\t\t\t\tjson.result.list.map((o) => {\r\n\t\t\t\t\t\t\t\t\tif (date_flag === \"日期\") {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(this.$toTime(o[0] ,\"yyyy-MM-dd\"));\r\n\t\t\t\t\t\t\t\t\t}else if (date_flag === \"时间\") {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(this.$toTime(o[0] ,\"hh:mm:ss\"));\r\n\t\t\t\t\t\t\t\t\t}else if (date_flag === \"日长\") {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(this.$toTime(o[0] ,\"yyyy-MM-dd hh:mm:ss\"));\r\n\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t\txAxis.push(o[0]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvalues.push(o.splice(1))\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.bar_obj_product_exchange.xAxis = xAxis;\r\n\t\t\t\t\t\t\t\tthis.bar_obj_product_exchange.values = values;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (flag){\r\n\t\t\t\t\t\t\t\tthis.get_nickname(this.bar_obj_product_exchange.xAxis,true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\trecognitionHeight(){\r\n\t\t\t\treturn \"830px\"\r\n\t\t\t},\r\n\t\t\trecognitionUrl(){\r\n\t\t\t\treturn \"https://www.faceplusplus.com.cn/${model.filter.recognitionType}/\"\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.chart {\r\n\t\tdisplay: block;\r\n\t\twidth: 100%;\r\n\t\theight: 400px;\r\n\t\tpadding: 1rem;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.el-col {\r\n\t\tpadding: 0.5rem;\r\n\t}\r\n\r\n\t.card {\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.iframe_box ,.iframe_box_change{\r\n\t\twidth: 100%;\r\n\t\theight: 1180px;\r\n\t\tposition: relative;\r\n\t\tmargin-top: 25px;\r\n\t}\r\n\t.iframe_box_change{\r\n\t\theight: 580px;\r\n\t\tpadding-top: 50px;\r\n\t}\r\n\t.iframe_box\t.iframe_box_content, .iframe_box_change .iframe_box_content{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t.iframe_box_top{\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tfont-size: 25px;\r\n\t\tline-height: 100px;\r\n\t\tbackground: #fff;\r\n\t\tz-index: 99999999;\r\n\t\tpadding-left: 50px;\r\n\t}\r\n\t#iframe_box_face div::before {\r\n\t\tcontent: '';\r\n\t\twidth: 100px;\r\n\t\tposition: absolute;\r\n\t\ttop: 154px;\r\n\t\tright: 129px;\r\n\t\tz-index: 999;\r\n\t\theight: 20px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t#iframe_box_face>h1 {\r\n\t\tmargin-top: 100px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n</style>\r\n"]}]}