{"remainingRequest":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.27_vue@3.4.27_webpack@4.47.0/node_modules/vue-loader/dist/index.js??ref--1-1!/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/components/charts/stacked_horizontal_bar_chart.vue?vue&type=template&id=d97e80ee","dependencies":[{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/components/charts/stacked_horizontal_bar_chart.vue","mtime":1708412370000},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1713866850089},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/babel-loader@8.3.0_@babel+core@7.24.5_webpack@4.47.0/node_modules/babel-loader/lib/index.js","mtime":1713866850104},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.27_vue@3.4.27_webpack@4.47.0/node_modules/vue-loader/dist/templateLoader.js","mtime":1715580215956},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js","mtime":1713866850089},{"path":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.4.27_vue@3.4.27_webpack@4.47.0/node_modules/vue-loader/dist/index.js","mtime":1715580215952}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9ImJhcl9jaGFydCIgOmlkPSJpZCI+5p2h5b2i5Zu+PC9kaXY+DQo="},{"version":3,"sources":["/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/components/charts/stacked_horizontal_bar_chart.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/lokli/Desktop/springboot江西乡村旅游服务平台+/project/src/main/resources/static/admin/src/components/charts/stacked_horizontal_bar_chart.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"bar_chart\" :id=\"id\">条形图</div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from \"@/assets/js/echarts.min.js\";\r\nexport default {\r\n  name: \"Home\",\r\n  components: {},\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: \"barChart\"\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"XXX条形图\"\r\n    },\r\n    vm: {\r\n      type: Object,\r\n      default: function() {\r\n        return {\r\n          yAxis: \"yAxis\",\r\n          names: \"names\",\r\n          values: \"values\",\r\n        };\r\n      },\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      option: {\r\n        title: {\r\n          text: \"XXX条形图\",\r\n          left: \"center\",\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          axisPointer: {\r\n            type: 'shadow'\r\n          }\r\n        },\r\n        legend: {\r\n          type: 'scroll',\r\n          orient: 'horizontal',\r\n          y: 'bottom'\r\n        },\r\n        xAxis: [{\r\n          type: 'value'\r\n        }],\r\n        yAxis: [{\r\n          type: 'category',\r\n          data:[]\r\n        }],\r\n        series: [\r\n          // {\r\n          // \tname: 'Forest',\r\n          // \ttype: 'bar',\r\n          // \tbarGap: 0,\r\n          // \temphasis: {\r\n          // \t\tfocus: 'series'\r\n          // \t},\r\n          // \tdata: [320, 332, 301, 334, 390]\r\n          // },\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    let that=this;\r\n    setTimeout(function(){\r\n      that.init_chart();\r\n    },200)\r\n  },\r\n  methods: {\r\n    init_chart() {\r\n      var option = this.option;\r\n\r\n      var title = this.title;\r\n      if (title) {\r\n        option.title.text = title;\r\n      }\r\n\r\n      var series = this.series;\r\n      option.series = series;\r\n\r\n      var yAxis = option.yAxis[0];\r\n      yAxis.data = this.vm.xAxis;\r\n\r\n      if (yAxis.data.length>4){\r\n        option.axisLabel= {\r\n          interval: 0, //使x轴文字显示全\r\n          formatter: function (params) {\r\n            let newParamsName = '';\r\n            const paramsNameNumber = params.length; // 文字总长度\r\n            const provideNumber = 4; //一行显示几个字\r\n            const rowNumber = Math.ceil(paramsNameNumber / provideNumber);\r\n            if (paramsNameNumber > provideNumber) {\r\n              for (let p = 0; p < rowNumber; p++) {\r\n                const start = p * provideNumber;\r\n                const end = start + provideNumber;\r\n                const tempStr = p === rowNumber - 1 ? params.substring(start, paramsNameNumber) : params.substring(start, end) + '\\n';\r\n                newParamsName += tempStr;\r\n              }\r\n            } else {\r\n              newParamsName = params;\r\n            }\r\n            return newParamsName;\r\n          },\r\n        }\r\n      }\r\n\r\n      let myChart = echarts.init(document.getElementById(this.id));\r\n      myChart.setOption(option);\r\n    },\r\n  },\r\n  computed: {\r\n    series() {\r\n      var vm = this.vm;\r\n      var list = this.vm.names;\r\n      var values = vm.values;\r\n      var series = [];\r\n      let labelOption = {\r\n        show: true,\r\n      };\r\n      for (let i=0;i<list.length;i++){\r\n        let data = []\r\n        for (let j=0;j<values.length;j++){\r\n          data.push(values[j][i]);\r\n        }\r\n        let dict_type = {\r\n          name: list[i],\r\n          type: 'bar',\r\n          stack: 'total',\r\n          barGap: 0,\r\n          label: labelOption,\r\n          emphasis: {\r\n            focus: 'series'\r\n          },\r\n          data: data\r\n        }\r\n        series.push(dict_type);\r\n      }\r\n      return series;\r\n    }\r\n  },\r\n  watch: {\r\n    list() {\r\n      this.init_chart();\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}